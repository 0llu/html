<!DOCTYPE html>
<html lang="et">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hserman GitHub</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css">
    <link rel="icon" href="favicon.32x32.png" type="image/x-icon">
    <script>
        async function laeFailid() {
            try {
                const vastus = await fetch('https://api.github.com/repos/{kasutajanimi}/{repo}/contents');
                const failid = await vastus.json();
                const kategooriad = {};

                failid.forEach(fail => {
                    const nimi = fail.name;
                    const tyyp = nimi.split('.').pop();

                    if (!kategooriad[tyyp]) {
                        kategooriad[tyyp] = [];
                    }
                    kategooriad[tyyp].push(fail);
                });

                looKategooriad(kategooriad);
            } catch (viga) {
                console.error('Viga failide laadimisel:', viga);
            }
        }

        function looKategooriad(kategooriad) {
            const konteiner = document.getElementById('kategooriad');
            konteiner.innerHTML = '';

            Object.keys(kategooriad).sort().forEach(tyyp => {
                const sektsioon = document.createElement('div');
                sektsioon.className = 'bg-white p-4 rounded-lg shadow hover:shadow-lg mb-6';

                const pealkiri = document.createElement('h3');
                pealkiri.className = 'text-lg font-bold mb-2';
                pealkiri.textContent = tyyp.toUpperCase();
                sektsioon.appendChild(pealkiri);

                const nimekiri = document.createElement('ul');
                nimekiri.className = 'list-disc list-inside text-blue-600';

                kategooriad[tyyp].forEach(fail => {
                    const element = document.createElement('li');
                    const link = document.createElement('a');
                    link.href = fail.html_url;
                    link.textContent = fail.name;
                    link.className = 'hover:underline';
                    element.appendChild(link);
                    nimekiri.appendChild(element);
                });

                sektsioon.appendChild(nimekiri);
                konteiner.appendChild(sektsioon);
            });
        }

        window.onload = laeFailid;
    </script>
</head>
<body class="bg-gray-100 text-gray-900">
    <header class="bg-blue-600 text-white py-4 shadow-lg">
        <div class="container mx-auto flex justify-between items-center">
            <h1 class="text-3xl font-bold">Hserman GitHub</h1>
            <span class="text-sm">Avasta minu töid, automaatselt sorteeritud failitüüpide järgi</span>
        </div>
    </header>

    <main class="container mx-auto my-8">
        <section>
            <h2 class="text-2xl font-semibold mb-6">Kategooriad</h2>
            <div id="kategooriad" class="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
                <!-- Failid laaditakse siia dünaamiliselt -->
            </div>
        </section>
    </main>

    <footer class="bg-gray-800 text-white py-4">
        <div class="container mx-auto text-center">
            <p>&copy; 2025 Minu GitHub Projektid. Kõik õigused kaitstud.</p>
        </div>
    </footer>
</body>
</html>
